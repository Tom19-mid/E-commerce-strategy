@model TL4_SHOP.Models.ViewModels.DonHangDetailViewModel

@{
    ViewData["Title"] = "Hóa đơn";
    Layout = "~/Views/Shared/_Layout_4TL.cshtml";
}
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

<!-- Libraries Stylesheet -->
<link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

<style>
    /* Font chữ chung */
    th, td, h2, h4 {
        font-family: Tahoma;
    }

    /* --- CẤU HÌNH BẢNG --- */
    .table-dam-hon {
        width: 100%;
        /* Lệnh này giúp các đường viền dính liền vào nhau thành 1 nét đơn (giống Excel) */
        border-collapse: collapse !important;
    }

        /* --- KẺ VIỀN CHO TỪNG Ô --- */
        /* Đây là phần quan trọng nhất để tạo ra các đường kẻ dọc/ngang như bạn vẽ */
        .table-dam-hon th,
        .table-dam-hon td {
            border: 1px solid #000 !important; /* Kẻ viền đen 1px cho TẤT CẢ các ô */
            padding: 8px; /* Thêm khoảng cách cho chữ không dính sát viền */
        }

    h2 {
        margin-top: 1%;
    }
</style>

@if (TempData["Message"] != null)
{
    <div class="alert alert-info">
        @TempData["Message"]
    </div>
}

@* <h2><span data-i18n="nav_Order_details">Chi tiết đơn hàng</span> <span>#@Model.DonHangId</span></h2> *@
<h2 class="Order_Details" ><span data-i18n="nav_Order_details">Chi tiết đơn hàng</span> #@Model.DonHangId</h2>

<p><strong data-i18n="nav_transaction_code">Mã giao dịch:</strong> @Model.TransactionId</p>
<p><strong data-i18n="nav_Customers">Khách hàng:</strong> @Model.TenKhachHang</p>
<p><strong data-i18n="nav_SDT">SĐT:</strong> @Model.SoDienThoai</p>
<p><strong data-i18n="nav_Address">Địa chỉ giao hàng:</strong> @Model.DiaChiGiaoHang</p>
<p><strong data-i18n="nav_Order_date2">Ngày đặt:</strong> @Model.NgayDatHang.ToString("dd/MM/yyyy HH:mm")</p>
<p><strong data-i18n="nav_Status2">Trạng thái:</strong> @Model.TrangThaiDonHangText</p>
<p><strong data-i18n="nav_Shipping_fee">Phí vận chuyển:</strong> @Model.PhiVanChuyen.ToString("N0") đ</p>
<p><strong data-i18n="nav_Total2">Tổng tiền:</strong> @Model.TongTien.ToString("N0") đ</p>
<p><strong data-i18n="nav_Payment_method">Phương thức thanh toán:</strong> @Model.PhuongThucThanhToan</p>

<h4 style="font-family: Tahoma;" data-i18n="nav_Product_details2">Chi tiết sản phẩm:</h4>
<table class="table table-dam-hon">
    <thead>
        <tr>
            <th data-i18n="nav_Product_name">Tên sản phẩm</th>
            <th data-i18n="nav_Quantity">Số lượng</th>
            <th data-i18n="nav_Unit_price">Đơn giá</th>
            <th data-i18n="nav_Cash">Thành tiền</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.ChiTiet)
        {
            <tr class="Product_Details">
                <td>@item.TenSanPham</td>
                <td>@item.SoLuong</td>
                <td>@item.DonGia.ToString("N0") đ</td>
                <td>@item.ThanhTien.ToString("N0") đ</td>
            </tr>
        }
    </tbody>
</table>

<a asp-action="TaiHoaDon" asp-route-id="@Model.DonHangId" class="btn btn-success">
    <i class="fa fa-download"></i> <span data-i18n="nav_Download_PDF_invoice">Tải hóa đơn PDF</span>
</a>
@if (Model.TrangThai != 3 && Model.TrangThai != 4 && Model.TrangThai != 5)
{
    <form asp-action="Cancel" asp-controller="Order" method="post">
        <input type="hidden" name="id" value="@Model.DonHangId" />
        <button type="submit" class="btn btn-danger mt-3">
            <i class="fa fa-times-circle"></i> <span data-i18n="nav_Cancel_order">Hủy đơn hàng</span>
        </button>
    </form>
}

